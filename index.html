<!DOCTYPE html>
<html>
	<head>
		<!-- Page formatting information -->
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		
		<!-- Include stylesheet for calculator -->
		<link rel="stylesheet" type="text/css" href="calc_styles.css"></link>

		<!-- Include the globals and the  text-to-display file of the relevant language:
			make sure to select "calc_English.js" or "calc_Spanish.js"--> 
			
		<script src="calc_English.js" type="text/javascript"></script>
		<script src="globals.js" type="text/javascript"></script>
		
		<!-- Include jquery -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		
		<script>
			document.title = CALC_TITLE; 		// Adds title to calc from calc_Language.js
		</script>
		

	</head>
	<body onload="init();">
	
		<!-- Left hand side (inputs) for the calculator -->
		<div id="left_hand_side">
			<div id="LHS_inputs">
				<!-- the top text goes here -->
				<h1 id="header"></h1>
				<h3 id="sub_header"></h3>
				<h5 id="instructions"></h5>
				
				<!-- start the form!!! -->
				<form id="calc_form" class="form">
					
					<!-- Select your municipality -->
					<div>			
						<label for="municipality" id="muni0"></label>
						<select id="municipality" />
							<option value="0" id = "muni_val0"></option>
							<option value="1" id = "muni_val1"></option>
						</select>
						<div class = "error_lbl">
							<p id="municipality_error">.</p>
						</div>
					</div>
					<!-- How many people in your household? -->
					<div>
						<label for="ppl" id="ppl0"></label>
						<input type="number" id="ppl" value="1" min="1" max="9999" step="1"/>
						<div class = "error_lbl">
							<p id="ppl_error">.</p>
						</div>
					</div>
					
					<!-- Length of your roof -->
					<div>
						<label for="length" id = "length0"></label>
						<input type="number" id="length" value="1" min="0.1" max="99" step="any"/>
						<div class = "error_lbl">
							<p id="length_error">.</p>
						</div>
					</div>
					
					<!-- Width of your roof -->
					<div>
						<label for="width" id = "width0"></label>
						<input type="number" id="width" value="1" min="0.1" max="99" step="any"/>
						<div class = "error_lbl">
							<p id="width_error">.</p>
						</div>
					</div>
					<br>
					<!-- Type of roof -->
					<div>
						<label id="roof0"></label><br>
						<input type="radio" id="cement_roof" name="roof_type" value="0.9" checked>.<br>
						<input type="radio" id="sheet_roof" name="roof_type" value="0.8">.<br>
						<input type="radio" id="spanish_roof" name="roof_type" value="0.7">.
					</div>	
					<br>
					
					<!-- Tell us all your water uses! We assume you also will drink and cook with rainwater -->
					<div>			
						<label for="uses" id="uses0"></label>
						<br>
						<!-- Brush your teeth? -->
						<input type="checkbox" class="water_use" id="brush_chk">.<br>
						
						<!-- Wash your hands? -->
						<input type="checkbox" class="water_use" id="hands_chk">.<br>
						
						<!-- Water your garden? -->
						<input type="checkbox" class="water_use" id="garden_chk">.
						
						<!-- If you do water your garden, we'll grab a bit more info about that... -->
						<div class="extra_input" id="garden_extra" for="garden_chk">
							<label for="garden_size" id="garden_extra1"></label>
							<input type="number" id="garden_size" value="10" min="0.1" step="any"/>
						</div><br>
						
						<!-- Do the dishes? -->
						<input type="checkbox" class="water_use" id="dishes_chk">.
						
						<!-- If you wash dishes, give us some more info! -->
						<div class="extra_input" id="dishes_extra">
							<label for="dishes_washing_type" id="dishes_extra1"></label>
							<select id="dishes_washing_type" />
								<option value="0" id="dishes_extra1_val0"></option>
								<option value="1" id="dishes_extra1_val1"></option>
							</select>					
						</div><br>
						<!-- bathe? -->
						<input type="checkbox" class="water_use" id="bath_chk">.<br>
						
						<!-- Wash your clothes? -->
						<input type="checkbox" class="water_use" id="clothes_chk">.
						
						<!-- If you wash your clothes, how do you do it? -->
						<div class="extra_input" id="laundry_extra">
							<label for="laundry_type" id="laundry_extra1"></label>
							<select id="laundry_type" />
								<option value="0" id="laundry_extra1_val0"></option>
								<option value="1" id="laundry_extra1_val1"></option>
							</select>					
						</div><br>
						
						<!-- Flush the toilet? -->
						<input type="checkbox" class="water_use" id="toilet_chk">.<br>
						
						<!-- Do anything else with water? -->
						<input type="checkbox" class="water_use" id="other_chk">.
						
						<!-- If you do other stuff with water, tell us how much! --> 
						<div class = "etra_input" id="extra_house0">
							<div id="other_extra" class="extra_input">
								<label for="other_text" id = "other_extra1"></label>
								<input type="text" id="other_text" value=""/>
							</div>
							<div id="other_extra2" class="extra_input">
								<label for="other_value" id="other_extra3"></label>
								<input type="number" id="other_value" value="1" min="1" step="any"/>
							</div><br>
						</div>
					</div>	
					<br>
				</form>
				<!-- When you press this button, it stops letting you edit the form 
						and displays your inputs in a table -->
				<div class="button">
					<button onclick="replace('LHS_inputs','LHS_display')" id="calc_button"></button>
				</div>
			</div>
			<div id="LHS_display">
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<p name="display_text">.</p>
				<div class="button">
					<button onclick="replace('LHS_display','LHS_inputs')" id="back2inputs_button"></button>
				</div>
			</div>
		</div>
		
		<!-- The right hand side displays the calculated resullts in simple or complex form -->
		<div id="right_hand_side">
		
			<!-- First, by default, let's display the simple version -->
			<div id = "RHS_simple">
			
				<!-- Display the amount used for just drinking+cooking -->
				<div class="output_number">
					<label id="essential_use0"></label><br>
					<label class="return_num" id="essential_use1">0</label><br>
					<label id="essential_use2"></label>
				</div>
				
				<!-- Display the TOTAL water used in a day -->
				<div class="output_number">
					<label id="total_use0"></label><br>
					<label class="return_num" id="total_use1">0</label><br>
					<label id="total_use2"></label>
				</div>
				
				<!-- Display the minimum tank size required for all essential uses -->
				<div class="output_number">
					<label id="tank_size0"></label><br>
					<label class="return_num" id="tank_size1">0</label><br>
					<label id="tank_size2"></label>
				</div>
		
				<!-- Push this button to go to the complex view --> 
				<div style="text-align: center">
					<button onclick="replace('RHS_simple','RHS_complex')" id="more_info_button0" class="info_button"></button>
				</div>
			</div>
			<div id="RHS_complex">
				<!-- Display the amount used for just drinking+cooking -->
				<div class="output_number">
					<label id="essential_use0_complex"></label><br>
					<label class="return_num" id="essential_use1_complex">0</label><br>
					<label id="essential_use2_complex"></label>
				</div>
				
				<!-- Display the TOTAL water used in a day -->
				<div class="output_number">
					<label id="total_use0_complex"></label><br>
					<label class="return_num" id="total_use1_complex">0</label><br>
					<label id="total_use2_complex"></label>
				</div>
				
				<div class="output_number" id="title_row">
					<label id="table_lbl"></label><br>
					<table align="center">
						<tr class="title_row">
							<th name="table_titles">.</th>
							<th name="table_titles">.</th>
							<th name="table_titles">.</th>
							<th name="table_titles">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
						<tr>
							<th name="month" class="month_lbl">.</th>
							<th name="collected">.</th>
							<th name="used">.</th>
							<th name="inventory">.</th>
						</tr>
					</table>
				</div>
				
				<!-- Display the minimum tank size required for all essential uses -->
				<div class="output_number">
					<label id="tank_size0_complex"></label><br>
					<label class="return_num" id="tank_size1_complex">0</label><br>
					<label id="tank_size2_complex"></label>
				</div>
				
				<br>
				<br>
				<br>
				<br>
				<br>
				<br>
				<div style="text-align: center">
					<button onclick="replace('RHS_complex','RHS_simple')" id="less_info_button0" class="info_button"></button>
				<div>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			</div>
		
		
		</div>
		


		<script>
			
		
			////////////////////////////////////////////////////////////////////
			////						function init() 					////
			//// 															////
			////	Loads the text in the correct language, and sets up 	////
			////	some basic form parameters.	Initializes the form, 		////
			////	stores the starting values in a global, and hides all	////
			////	error messages and extra text that needs to be hidden. 	////
			////////////////////////////////////////////////////////////////////
		
			function init() {
			
				addLanguageText();
				initForm();
				loadStartingValues();
				hideErrorLbls();
				hideExtraText();
				hideComplexOutput();
				
				displayStuff = inputs2outputs(allData);
				displayOutputs(displayStuff);
				
				startInterrupt();
				
				
			};
			
			////////////////////////////////////////////////////////////////////
			////				function addLanguageText()					////
			//// 															////
			////	Loads the text in the correct display language.			////
			////////////////////////////////////////////////////////////////////
			
			function addLanguageText(){
				document.getElementById("header").innerHTML = HEADER; 				// Puts the correct language text on the page
				document.getElementById("sub_header").innerHTML = SUB_HEADER;		//	for all elements
				document.getElementById("instructions").innerHTML = INSTRUCTIONS;
				document.getElementById("muni0").innerHTML = MUNI0_LBL;
				document.getElementById("muni_val0").innerHTML = MUNI_VAL0_LBL;
				document.getElementById("muni_val1").innerHTML = MUNI_VAL1_LBL;
				document.getElementById("ppl0").innerHTML = PPL0_LBL;
				document.getElementById("length0").innerHTML = LENGTH0_LBL;
				document.getElementById("width0").innerHTML = WIDTH0_LBL;
				document.getElementById("roof0").innerHTML = ROOF0_LBL;
				document.getElementById("cement_roof").nextSibling.data = CEMENT_ROOF_LBL;
				document.getElementById("sheet_roof").nextSibling.data = SHEET_ROOF_LBL;
				document.getElementById("spanish_roof").nextSibling.data = SPANISH_ROOF_LBL;
				document.getElementById("uses0").innerHTML = USES0_LBL;
				document.getElementById("brush_chk").nextSibling.data = BRUSH_CHK_LBL;
				document.getElementById("hands_chk").nextSibling.data = HANDS_CHK_LBL;
				document.getElementById("garden_chk").nextSibling.data = GARDEN_CHK_LBL;
				document.getElementById("dishes_chk").nextSibling.data = DISHES_CHK_LBL;
				document.getElementById("bath_chk").nextSibling.data = BATH_CHK_LBL;
				document.getElementById("clothes_chk").nextSibling.data = CLOTHES_CHK_LBL;
				document.getElementById("toilet_chk").nextSibling.data = TOILET_CHK_LBL;
				document.getElementById("other_chk").nextSibling.data = OTHER_CHK_LBL;
				document.getElementById("garden_extra1").innerHTML = GARDEN_EXTRA1_LBL;
				document.getElementById("dishes_extra1").innerHTML = DISHES_EXTRA1_LBL;
				document.getElementById("dishes_extra1_val0").innerHTML = DISHES_EXTRA1_VAL0_LBL;
				document.getElementById("dishes_extra1_val1").innerHTML = DISHES_EXTRA1_VAL1_LBL;
				document.getElementById("laundry_extra1").innerHTML = LAUNDRY_EXTRA1_LBL;
				document.getElementById("laundry_extra1_val0").innerHTML = LAUNDRY_EXTRA1_VAL0_LBL;
				document.getElementById("laundry_extra1_val1").innerHTML = LAUNDRY_EXTRA1_VAL1_LBL;
				document.getElementById("other_extra1").innerHTML = OTHER_EXTRA1_LBL; 
				document.getElementById("other_extra3").innerHTML = OTHER_EXTRA3_LBL;
				document.getElementById("essential_use0").innerHTML = ESSENTIAL_USE0_LBL;
				document.getElementById("essential_use2").innerHTML = ESSENTIAL_USE2_LBL;
				document.getElementById("total_use0").innerHTML = TOTAL_USE0_LBL;
				document.getElementById("total_use2").innerHTML = TOTAL_USE2_LBL;
				document.getElementById("tank_size0").innerHTML = TANK_SIZE0_LBL;
				document.getElementById("tank_size2").innerHTML = TANK_SIZE2_LBL;
				document.getElementById("essential_use0_complex").innerHTML = ESSENTIAL_USE0_LBL;
				document.getElementById("essential_use2_complex").innerHTML = ESSENTIAL_USE2_LBL;
				document.getElementById("total_use0_complex").innerHTML = TOTAL_USE0_LBL;
				document.getElementById("total_use2_complex").innerHTML = TOTAL_USE2_LBL;
				document.getElementById("tank_size0_complex").innerHTML = TANK_SIZE0_LBL;
				document.getElementById("tank_size2_complex").innerHTML = TANK_SIZE2_LBL;
				document.getElementById("more_info_button0").innerHTML = MORE_INFO_BUTTON_LBL;
				document.getElementById("less_info_button0").innerHTML = LESS_INFO_BUTTON_LBL;
				document.getElementById("table_lbl").innerHTML = TABLE_LBL;
				document.getElementById("calc_button").innerHTML = CALC_BUTTON_LBL;
				document.getElementById("back2inputs_button").innerHTML = BACK2INPUTS_BUTTON_LBL;
				
				var els = document.getElementsByName("table_titles")
				for (var i=0; i<els.length; i++) {
					els[i].innerHTML = TABLE_TITLES[i];
				};
				
				var els = document.getElementsByName("month")
				for (var i=0; i<els.length; i++) {
					els[i].innerHTML = MONTHS[i];
				};
				
			}
			
			////////////////////////////////////////////////////////////////////
			////				function initForm()							////
			//// 															////
			////	Initializes the form to not auto-validate so we can 	////
			////	display our own error messages.							////
			////////////////////////////////////////////////////////////////////
			
			function initForm() {
				form = document.getElementById("calc_form");						// Sets the global form so everyone can access it;
				form.noValidate = true;												// Turns off auto-validate so we can self-validate
				form.onchange = validateForm;
				form.onsubmit = validateForm;
			}
			
			////////////////////////////////////////////////////////////////////
			////				function loadStartingValues()				////
			//// 															////
			////	Loads the starting values into a global array.			////
			////////////////////////////////////////////////////////////////////			
				
			function loadStartingValues() {
				allData = {															// initializes the structure of the global, allData 
					municipality: Number(document.getElementById("municipality").value),
					ppl: Number(document.getElementById("ppl").value),				// 	and feeds in initial conditions.
					length: Number(document.getElementById("length").value),
					width: Number(document.getElementById("width").value),
					brush_chk: Boolean(document.getElementById("brush_chk").checked),
					hands_chk: Boolean(document.getElementById("hands_chk").checked),
					garden_chk: Boolean(document.getElementById("garden_chk").checked),
					dishes_chk: Boolean(document.getElementById("dishes_chk").checked),
					bath_chk: Boolean(document.getElementById("bath_chk").checked),
					clothes_chk: Boolean(document.getElementById("clothes_chk").checked),
					toilet_chk: Boolean(document.getElementById("toilet_chk").checked),
					other_chk: Boolean(document.getElementById("other_chk").checked),
					roof_type: Number(document.getElementById("cement_roof").value),
					garden_size: Number(document.getElementById("garden_size").value),
					laundry_type: Number(document.getElementById("laundry_type").value),
					garden_size: Number(document.getElementById("garden_size").value),
					other_text: String(document.getElementById("other_text").value),
					other_value: Number(document.getElementById("other_value").value),
					dishes_washing_type: Number(document.getElementById("dishes_washing_type").value)	
				};
			}	
			
			////////////////////////////////////////////////////////////////////
			////				function hideErrorLbls()					////
			//// 															////
			////	Hides error labels - pretty self-explanatory...			////
			////////////////////////////////////////////////////////////////////
			
			function hideErrorLbls() {
				var lblBoxes = document.getElementsByClassName("error_lbl");		// Turn all label boxes to opacity=0
				for (var i=0; i<lblBoxes.length; i++) {
					lblBoxes[i].style.opacity = 0;				
				};
			}
			
			////////////////////////////////////////////////////////////////////
			////				function hideExtraText()					////
			//// 															////
			////	Hides extra text that's tied to checkbox events			////
			////////////////////////////////////////////////////////////////////
			
			function hideExtraText() {
				var extra_inputs = document.getElementsByClassName("extra_input");		// Turn all label boxes to opacity=0
				for (var i=0; i<extra_inputs.length; i++) {
					extra_inputs[i].style.opacity = 0;				
				};			
			}
			
			function hideComplexOutput() {
				document.getElementById("RHS_complex").style.opacity = 0;
				document.getElementById("RHS_complex").hidden = true;
				document.getElementById("LHS_display").style.opacity = 0;
				document.getElementById("LHS_display").hidden = true;
				
			}

			
			////////////////////////////////////////////////////////////////////
			////				function updateInputs() 					////
			//// 															////
			////	Updates the global allData with the most-recently-		////
			////	entered data. 											////
			////////////////////////////////////////////////////////////////////
			
			function updateInputs(el) {
				if (el.type == "checkbox") {
					allData[el.id] = Boolean(el.checked);
				} else if (el.type == "number" | el.type == "select-one") {
					allData[el.id] = Number(el.value)
				} else if (el.type == "text") {
					allData[el.id] = String(el.value)
				} else if (el.type == "radio") {
					allData[el.name] =  el.value;
				};
				displayStuff = inputs2outputs(allData);
				displayOutputs(displayStuff);
				
			}
			
			////////////////////////////////////////////////////////////////////
			////	function keydown(event) [Prevent form submit on enter]	////
			//// 															////
			////	checks to see if the key that was pressed was 			////
			////	key #13 (enter/return). If so, it prevents the default 	////
			////	behavior of submitting the form. That way, we never 	////
			////	send the data anywhere, just calculate some stuff with 	////
			////	it here. 												////		
			////////////////////////////////////////////////////////////////////

			
			$(document).ready(function() {
				$(window).keydown(function(event){
					if(event.keyCode == 13) {
					event.preventDefault();
					return false;
					}
				});
			});
			
			////////////////////////////////////////////////////////////////////
			////	function keypress(event) [check validity of keystroke]	////
			//// 															////
			////	checks to see if the key that was pressed was 			////
			////	a valid key. If not, doesn't allow keypress.			////		
			////////////////////////////////////////////////////////////////////
			
			$('input').bind('keypress', function (event) {
				if (event.target.type == "number") { 								// If it's being entered in a numeric field
					if (!numAcceptableKeys.includes(event.originalEvent.key)) { 	// If the key isn't a number or a movement key
						event.preventDefault(); 									// 	prevent behavior
						return false;		
					} else {
						return true;
					};
				} else { 							// If the field isn't a number, allow all behavior.
					return true;
				};	
			});
			
			////////////////////////////////////////////////////////////////////
			////				function validateForm(event)				////
			//// 															////
			////	When an event occurs, validates the event target. For 	////
			////	example, if a value is entered into a numberic input,	////
			////	this function validates that particular input. At the 	////
			////	end, it updates the global data. If the entry was 		////
			////	invalid it throws an error message, replaces the value,	////
			////	then loads the data.									////		
			////////////////////////////////////////////////////////////////////
			
			function validateForm(event) {
				 // fetch cross-browser event object and form node
				
				event = (event ? event : window.event);
				var element = (event.target ? event.target : event.srcElement);
				var rets = customValid(element);
				var valid = rets[0];
				var errMsg = rets[1];
				if (valid){
					updateInputs(element);
				} else {
					var errorText = document.getElementById(element.id+"_error");
					var errorBox = errorText.parentElement;
					errorText.innerHTML = errMsg;
					fadeIn(errorBox);
					setTimeout(function(){fadeOut(errorBox, false)}, ERROR_DISPLAY_TIME);
					element.validity.valid = false;
					updateInputs(element);
				};	
			}
			
			////////////////////////////////////////////////////////////////////
			////					fucntion customValid(el)				////
			//// 															////
			////	Takes an element, el, and validates it based on certain	////
			////	preset rules. Returns:									////
			////		[valid (boolean), errorMsg (string)]				////
			////////////////////////////////////////////////////////////////////
			
			
			function customValid(el) {
				var valid = true;
				var value = Number(el.value);
				var errorMsg = "";
				if (el.id == "ppl") {
					if (value < el.min)	{
						valid = false;
						errorMsg = PPL_MIN_E1+el.min+PPL_MIN_E2;
						el.value = el.min;
					} else if (value > el.max) {
						valid = false;
						errorMsg = PPL_MAX_E1+el.max+PPL_MAX_E2;
						el.value = el.max;
					} else if (value % 1 != 0 & el.id == "ppl") {
						valid = false;
						errorMsg = PPL_DECIMAL_E;
						el.value = parseInt(value, 10);
					};
				return [valid, errorMsg];
				} else if (el.id == "length" | el.id == "width") {
					if (value < el.min) {
						valid = false;
						errorMsg = SIZE_MIN_E1;
						el.value = el.min;
					} else if (value > el.max) {
						valid = false;
						errorMsg = SIZE_MAX_E1+el.max+SIZE_MAX_E2;
						el.value = el.max;
					};
					return [valid, errorMsg];
				} else {
				return [valid, errorMsg];
				};
			}
			
			////////////////////////////////////////////////////////////////////
			////				functions fadeIn(el), fadeOut(el) 			////
			//// 															////
			////	Fades in or out the passed element by adjusting the 	////
			////	the div element's opacity in steps. Many thanks to:		////////////////////
			////	http://www.chrisbuttery.com/articles/fade-in-fade-out-with-javascript/ 	////	
			////	for this simple and lovely bit of js. Cheers! 							////
			////	If the div is visible, fadeIn does nothing. If it's not, fade out 		////	
			////	does nothing. 															////
			////////////////////////////////////////////////////////////////////////////////////
			
			function fadeOut(el, hide){ 
				(function fade() {
					if ((el.style.opacity -= .09) < 0) {
					el.style.opacity = 0;
					} else {
					requestAnimationFrame(fade);
					}
				})();

				if (hide) {
					el.hidden = true;
				};
			}
			
			function fadeIn(el){
				
				el.style.opacity = 0;
				el.hidden = false; 
				
				(function fade() {
					var val = parseFloat(el.style.opacity);
					if (!((val += .075) > 1)) {
					el.style.opacity = val;
					requestAnimationFrame(fade);
					}
				})();
				
			}
			
			////////////////////////////////////////////////////////////////////
			////				function that executes every time 			////
			////				a checkbox is checked or unchecked 			////
			//// 															////
			////	Opens up the appropriate extra entry boxes depending on ////
			//// 	which checkbox is checked. 								////
			////////////////////////////////////////////////////////////////////
			
			$(':checkbox').change(function(event){
				var el = event.target;
				if (el.id == "garden_chk"){ 		// Open input field to get garden size
					if (el.checked) {
						fadeIn(document.getElementById("garden_extra"));
					} else {
						fadeOut(document.getElementById("garden_extra"), false);
					};
				} else if (el.id == "other_chk") { 	// Open input fields to get other info
					if (el.checked) {
						fadeIn(document.getElementById("extra_house0"));
						fadeIn(document.getElementById("other_extra"));
						fadeIn(document.getElementById("other_extra2"));
					} else {
						fadeOut(document.getElementById("extra_house0"), false);
						fadeOut(document.getElementById("other_extra"), false);
						fadeOut(document.getElementById("other_extra2"), false);
					};
				} else if (el.id == "dishes_chk") { // open input field to get type of dish washing
					if (el.checked) {
						fadeIn(document.getElementById("dishes_extra"));
					} else {
						fadeOut(document.getElementById("dishes_extra", false));
					};
				} else if (el.id == "clothes_chk") { // open input field to get type of laundry
					if (el.checked) {
						fadeIn(document.getElementById("laundry_extra"));
					} else {
						fadeOut(document.getElementById("laundry_extra"), false);
					};
				
				};
			});
			
			////////////////////////////////////////////////////////////////////
			////			--- BUG FIX FOR QUICK CHECKBOX CLICK --- 		////	
			////				function startInterrupt()					////
			//// 															////
			////	When a checkbox is clicked off-on-off rapidly, the	 	////
			////	extra text fades in, out, then in again, displaying 	////
			////	when it shouldn't be. These two functions are a patch	////
			////	over that bug. Every INTERRUPT_INTERVAL, this function 	////
			////	interrupts the code and checks all the checkboxes. If 	////
			////	they aren't checked, it makes sure that their 			////
			////	corresponding extra info boxes are hidden. This patch,	////
			////	as with most patches, isn't perfect. There's still a 	////
			////	half second or so where the label box pops up. Se lavi.	////
			////////////////////////////////////////////////////////////////////

			
			function startInterrupt() {
				var myInterval = setInterval( "hideUncheckedLbls()", INTERRUPT_INTERVAL);  // run
			}
			
			function hideUncheckedLbls() {
				els = document.getElementsByClassName("water_use");
				for (var i=0; i<els.length; i++) {	
					if (!els[i].checked) {
						els[i].nextElementSibling.style.opacity = 0;
					};
				};
			}
			
			////////////////////////////////////////////////////////////////////
			////			function showComplex()	/ showSimple() 			////
			//// 															////
			////	Hides one RHS panel and shows the other.				////
			////////////////////////////////////////////////////////////////////
			
			function replace(e2hide, e2show) {
				fadeOut(document.getElementById(e2hide), true);
				fadeIn(document.getElementById(e2show));
			}
			//function showSimple() {
			//	fadeOut(document.getElementById("RHS_complex"), true);
			//	fadeIn(document.getElementById("RHS_simple"));
			//}
			
			////////////////////////////////////////////////////////////////////
			////			function displayOutputs				 			////
			//// 															////
			////	Takes the calculated outputs and displays them on the	////
			////	right hand side panel. 									////
			////////////////////////////////////////////////////////////////////
			
			
			function displayOutputs(o) {
				document.getElementById("essential_use1").innerHTML = String(o.essentialDailyUse);
				document.getElementById("total_use1").innerHTML = String(o.essentialDailyUse+o.totalOtherUse);
				document.getElementById("tank_size1").innerHTML = String(o.minTankSize);
				document.getElementById("essential_use1_complex").innerHTML = String(o.essentialDailyUse);
				document.getElementById("total_use1_complex").innerHTML = String(o.essentialDailyUse+o.totalOtherUse);
				document.getElementById("tank_size1_complex").innerHTML = String(o.minTankSize);
				var els = document.getElementsByName("collected");
				for (var i=0; i<els.length; i++) {
					els[i].innerHTML = String(o.monthlyCollection[i]);
				}
				var els = document.getElementsByName("used");
				for (var i=0; i<els.length; i++) {
					els[i].innerHTML = String(o.monthlyUse[i]);
				}
				var els = document.getElementsByName("inventory");
				for (var i=0; i<els.length; i++) {
					els[i].innerHTML = String(o.monthlyCollection[i]-o.monthlyUse[i]);
				}
				
			}
			
			////////////////////////////////////////////////////////////////////
			////			function inputs2outputs				 			////
			//// 															////
			////	Takes the user's entered inputs and converts them into	////
			////	outputs. This is the function that contains all of the 	////
			////	citeable-materials, it is the backbone of the actual	////
			////	calculation process.									////
			////															////
			////	Arguments:												////
			////		inputs --- a dictionary of all of the user inputs	////
			////															////	
			////	Returns:												////
			////		outputs --- a dictionary of things to display to 	////
			////					user. Fields include:					////
			////						essentialDailyUse [L/day]			////
			////						totalOtherUse [L/day]				////
			////						minTankSize [L]						////
			////						montlyUse [L] (a 1x12 array with a 	////
			////							cell for each month's use)		////
			////						monlyCollection [L] (1x12 array) 	////
			////															////
			////	Algorithm: 												////
			////		CHANTAL WILL FILL OUT THIS SECTION OF THE COMMENTS	////
			////		WITH HER USUAL FOCUS ON STYLE AND CLARITY =)		////
			////															////
			////	Update/Revision History:								////
			////		aaron krupp 	2/Nov/2016	empty function written	////	
			////									comments header written ////
			////////////////////////////////////////////////////////////////////			
			
			function inputs2outputs(inputs) {
				outputs = {essentialDailyUse: 42,
					totalOtherUse: 105,
					minTankSize: 1200,
					monthlyUse: Array.apply(null, Array(12)).map(Number.prototype.valueOf,0),
					monthlyCollection: Array.apply(null, Array(12)).map(Number.prototype.valueOf,0)
				};
				
				
				
				
				return outputs;
			
			}
			
     
		</script>
	</body>
</html>
